(function(n){if(null==n){n=window}if(n.puremvc){return}function d(p,q){this.setNotifyMethod(p);this.setNotifyContext(q)}d.prototype.setNotifyMethod=function(p){this.notify=p};d.prototype.setNotifyContext=function(p){this.context=p};d.prototype.getNotifyMethod=function(){return this.notify};d.prototype.getNotifyContext=function(){return this.context};d.prototype.notifyObserver=function(p){this.getNotifyMethod().call(this.getNotifyContext(),p)};d.prototype.compareNotifyContext=function(p){return p===this.context};d.prototype.notify=null;d.prototype.context=null;function l(q,p,r){this.name=q;this.body=p;this.type=r}l.prototype.getName=function(){return this.name};l.prototype.setBody=function(p){this.body=p};l.prototype.getBody=function(){return this.body};l.prototype.setType=function(p){this.type=p};l.prototype.getType=function(){return this.type};l.prototype.toString=function(){var p="Notification Name: "+this.getName();p+="\nBody:"+((this.body==null)?"null":this.body.toString());p+="\nType:"+((this.type==null)?"null":this.type);return p};l.prototype.name=null;l.prototype.type=null;l.prototype.body=null;function i(){}i.prototype.sendNotification=function(s,p,r){var q=this.getFacade();if(q){q.sendNotification(s,p,r)}};i.prototype.facade;i.prototype.initializeNotifier=function(p){this.multitonKey=String(p);this.facade=this.getFacade()};i.prototype.getFacade=function(){if(this.multitonKey==null){throw new Error(i.MULTITON_MSG)}return m.getInstance(this.multitonKey)};i.prototype.multitonKey=null;i.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";function h(){}h.prototype=new i;h.prototype.constructor=h;h.prototype.execute=function(p){};function j(){this.subCommands=[];this.initializeMacroCommand()}j.prototype=new i;j.prototype.constructor=j;j.prototype.subCommands=null;j.prototype.initializeMacroCommand=function(){};j.prototype.addSubCommand=function(p){this.subCommands.push(p)};j.prototype.execute=function(p){while(this.subCommands.length>0){var q=this.subCommands.shift();var r=new q;r.initializeNotifier(this.multitonKey);r.execute(p)}};function k(p,q){this.mediatorName=p||this.constructor.NAME;this.viewComponent=q}k.NAME="Mediator";k.prototype=new i;k.prototype.constructor=k;k.prototype.getMediatorName=function(){return this.mediatorName};k.prototype.setViewComponent=function(p){this.viewComponent=p};k.prototype.getViewComponent=function(){return this.viewComponent};k.prototype.listNotificationInterests=function(){return[]};k.prototype.handleNotification=function(p){return};k.prototype.onRegister=function(){return};k.prototype.onRemove=function(){return};k.prototype.mediatorName=null;k.prototype.viewComponent=null;function f(q,p){this.proxyName=q||this.constructor.NAME;if(p!=null){this.setData(p)}}f.NAME="Proxy";f.prototype=new i;f.prototype.constructor=f;f.prototype.getProxyName=function(){return this.proxyName};f.prototype.setData=function(p){this.data=p};f.prototype.getData=function(){return this.data};f.prototype.onRegister=function(){return};f.prototype.onRemove=function(){return};f.prototype.proxyName=null;f.prototype.data=null;function m(p){if(m.instanceMap[p]!=null){throw new Error(m.MULTITON_MSG)}this.initializeNotifier(p);m.instanceMap[p]=this;this.initializeFacade()}m.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};m.getInstance=function(p){if(null==p){return null}if(m.instanceMap[p]==null){m.instanceMap[p]=new m(p)}return m.instanceMap[p]};m.prototype.initializeController=function(){if(this.controller!=null){return}this.controller=c.getInstance(this.multitonKey)};m.prototype.initializeModel=function(){if(this.model!=null){return}this.model=b.getInstance(this.multitonKey)};m.prototype.initializeView=function(){if(this.view!=null){return}this.view=a.getInstance(this.multitonKey)};m.prototype.registerCommand=function(p,q){this.controller.registerCommand(p,q)};m.prototype.removeCommand=function(p){this.controller.removeCommand(p)};m.prototype.hasCommand=function(p){return this.controller.hasCommand(p)};m.prototype.registerProxy=function(p){this.model.registerProxy(p)};m.prototype.retrieveProxy=function(p){return this.model.retrieveProxy(p)};m.prototype.removeProxy=function(q){var p=null;if(this.model!=null){p=this.model.removeProxy(q)}return p};m.prototype.hasProxy=function(p){return this.model.hasProxy(p)};m.prototype.registerMediator=function(p){if(this.view!=null){this.view.registerMediator(p)}};m.prototype.retrieveMediator=function(p){return this.view.retrieveMediator(p)};m.prototype.removeMediator=function(p){var q=null;if(this.view!=null){q=this.view.removeMediator(p)}return q};m.prototype.hasMediator=function(p){return this.view.hasMediator(p)};m.prototype.sendNotification=function(r,p,q){this.notifyObservers(new l(r,p,q))};m.prototype.notifyObservers=function(p){if(this.view!=null){this.view.notifyObservers(p)}};m.prototype.initializeNotifier=function(p){this.multitonKey=p};m.hasCore=function(p){return m.instanceMap[p]!=null};m.removeCore=function(p){if(m.instanceMap[p]==null){return}b.removeModel(p);a.removeView(p);c.removeController(p);delete m.instanceMap[p]};m.prototype.controller=null;m.prototype.model=null;m.prototype.view=null;m.prototype.multitonKey=null;m.instanceMap=[];m.MULTITON_MSG="Facade instance for this Multiton key already constructed!";function a(p){if(a.instanceMap[p]!=null){throw new Error(a.MULTITON_MSG)}this.multitonKey=p;a.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}a.prototype.initializeView=function(){return};a.getInstance=function(p){if(null==p){return null}if(a.instanceMap[p]==null){a.instanceMap[p]=new a(p)}return a.instanceMap[p]};a.prototype.registerObserver=function(q,p){if(this.observerMap[q]!=null){this.observerMap[q].push(p)}else{this.observerMap[q]=[p]}};a.prototype.notifyObservers=function(r){if(this.observerMap[r.getName()]!=null){var t=this.observerMap[r.getName()],s=[],p;for(var q=0;q<t.length;q++){p=t[q];s.push(p)}for(var q=0;q<s.length;q++){p=s[q];p.notifyObserver(r)}}};a.prototype.removeObserver=function(r,q){var s=this.observerMap[r];for(var p=0;p<s.length;p++){if(s[p].compareNotifyContext(q)==true){s.splice(p,1);break}}if(s.length==0){delete this.observerMap[r]}};a.prototype.registerMediator=function(r){if(this.mediatorMap[r.getMediatorName()]!=null){return}r.initializeNotifier(this.multitonKey);this.mediatorMap[r.getMediatorName()]=r;var s=r.listNotificationInterests();if(s.length>0){var p=new d(r.handleNotification,r);for(var q=0;q<s.length;q++){this.registerObserver(s[q],p)}}r.onRegister()};a.prototype.retrieveMediator=function(p){return this.mediatorMap[p]};a.prototype.removeMediator=function(p){var r=this.mediatorMap[p];if(r){var s=r.listNotificationInterests();for(var q=0;q<s.length;q++){this.removeObserver(s[q],r)}delete this.mediatorMap[p];r.onRemove()}return r};a.prototype.hasMediator=function(p){return this.mediatorMap[p]!=null};a.removeView=function(p){delete a.instanceMap[p]};a.prototype.mediatorMap=null;a.prototype.observerMap=null;a.instanceMap=[];a.prototype.multitonKey=null;a.MULTITON_MSG="View instance for this Multiton key already constructed!";function b(p){if(b.instanceMap[p]){throw new Error(b.MULTITON_MSG)}this.multitonKey=p;b.instanceMap[p]=this;this.proxyMap=[];this.initializeModel()}b.prototype.initializeModel=function(){};b.getInstance=function(p){if(null==p){return null}if(b.instanceMap[p]==null){b.instanceMap[p]=new b(p)}return b.instanceMap[p]};b.prototype.registerProxy=function(p){p.initializeNotifier(this.multitonKey);this.proxyMap[p.getProxyName()]=p;p.onRegister()};b.prototype.retrieveProxy=function(p){return this.proxyMap[p]};b.prototype.hasProxy=function(p){return this.proxyMap[p]!=null};b.prototype.removeProxy=function(q){var p=this.proxyMap[q];if(p){this.proxyMap[q]=null;p.onRemove()}return p};b.removeModel=function(p){delete b.instanceMap[p]};b.prototype.proxyMap=null;b.instanceMap=[];b.prototype.multitonKey;b.MULTITON_MSG="Model instance for this Multiton key already constructed!";function c(p){if(c.instanceMap[p]!=null){throw new Error(c.MULTITON_MSG)}this.multitonKey=p;c.instanceMap[this.multitonKey]=this;this.commandMap=new Array();this.initializeController()}c.prototype.initializeController=function(){this.view=a.getInstance(this.multitonKey)};c.getInstance=function(p){if(null==p){return null}if(null==this.instanceMap[p]){this.instanceMap[p]=new this(p)}return this.instanceMap[p]};c.prototype.executeCommand=function(p){var r=this.commandMap[p.getName()];if(r==null){return}var q=new r();q.initializeNotifier(this.multitonKey);q.execute(p)};c.prototype.registerCommand=function(p,q){if(this.commandMap[p]==null){this.view.registerObserver(p,new d(this.executeCommand,this))}this.commandMap[p]=q};c.prototype.hasCommand=function(p){return this.commandMap[p]!=null};c.prototype.removeCommand=function(p){if(this.hasCommand(p)){this.view.removeObserver(p,this);this.commandMap[p]=null}};c.removeController=function(p){delete this.instanceMap[p]};c.prototype.view=null;c.prototype.commandMap=null;c.prototype.multitonKey=null;c.instanceMap=[];c.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:(function(){return this})(),extend:function(r,p){if("function"!==typeof r){throw new TypeError("#extend- child should be Function")}if("function"!==typeof p){throw new TypeError("#extend- parent should be Function")}if(p===r){return}var q=new Function;q.prototype=p.prototype;r.prototype=new q;return r.prototype.constructor=r},decorate:function(q,r){for(var p in r){q[p]=r[p]}return q}};function e(t,u,y){var q=t.split("."),s=y||o.global,p,x,w;for(var v=0,r=q.length;v<r;v++){p=s;w=q[v];s=(null==s[w]?s[w]={}:s[w])}if(null==u){return s}return p[w]=u}function g(w,x,r){if(!w){w={}}var u=w.name,p=w.parent,q="function"===typeof p,t,s=w.scope||null,v;if("parent" in w&&!q){throw new TypeError("Class parent must be Function")}if(w.hasOwnProperty("constructor")){t=w.constructor;if("function"!==typeof t){throw new TypeError("Class constructor must be Function")}}else{if(q){t=function(){p.apply(this,arguments)}}else{t=new Function}}if(q){o.extend(t,p)}if(x){v=t.prototype;o.decorate(v,x);v.constructor=t}if(r){o.decorate(t,r)}if(u){if("string"!==typeof u){throw new TypeError("Class name must be primitive string")}e(u,t,s)}return t}n.puremvc={View:a,Model:b,Controller:c,SimpleCommand:h,MacroCommand:j,Facade:m,Mediator:k,Observer:d,Notification:l,Notifier:i,Proxy:f,define:g,declare:e}})(this);